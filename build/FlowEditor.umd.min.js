!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("raphael"));else if("function"==typeof define&&define.amd)define(["raphael"],e);else{var o="object"==typeof exports?e(require("raphael")):e(t.raphael);for(var n in o)("object"==typeof exports?exports:t)[n]=o[n]}}("undefined"!=typeof self?self:this,function(t){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,o){"use strict";var n=o(1),i=function(){function t(t,e){if(this.conLns={from:[],to:[]},this.tRElem={},this._dataQueueDick={},this.isSelEd=!1,this.paper=t,this.fromLine=[],this.toLine=[],this.NodeType=null,e){e.bkgMagnetic=e.bkgMagnetic||"#FF0000";e.features;this.opt=e}this._onInit()}return t.prototype.feature=function(t,e,o){var i=this.opt.features||{};if(e)return"object"==typeof t?i=n.a.jsonMerge(i,t):i[t]=e,this.opt.features=i,this;if("object"==typeof t)return null;var r=i[t]||null;return o&&!r?(i[t]=o,this.opt.features=i,o):r},t.prototype.data=function(t,e){return void 0===e?void 0===t?n.a.clone(this._dataQueueDick):this._dataQueueDick[t]:(this._dataQueueDick[t]=e,this._code||"_code"!=t||(this._code=e),this)},Object.defineProperty(t.prototype,"code",{get:function(){return this._code},enumerable:!0,configurable:!0}),t.prototype.creator=function(t){return this._whenCreatorEvt(),this},t.prototype._ps2Path=function(t,e){for(var o="",n=0;n<t.length;n++)o+=(o?"L":"M")+t[n].x+","+t[n].y;return e&&(o+="Z"),o},t.prototype._ps2PathAttr=function(t,e){for(var o=[],n=0;n<t.length;n++){var i=["L"];0==o.length&&(i[0]="M"),i.push(t[n].x,t[n].y),o.push(i)}return e&&o.push(["Z"]),o},t.prototype.line=function(t,e){return e?this.conLns.to.push(t):this.conLns.from.push(t),this},t.prototype.rmLine=function(t,e){if(t)if(e){var o=[];n.a.each(this.conLns.to,function(e,n){n!=t&&o.push(n)}),this.conLns.to=o}else{var i=[];n.a.each(this.fromLine,function(e,o){o!=t&&i.push(o)}),this.conLns.from=i}return this},t.prototype._whenCreatorEvt=function(){},t.prototype._onInit=function(){},t.prototype.onDrag=function(){},t.prototype.recordLine=function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)},t.prototype.syncLineMove=function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,o=this.toLine,n=0;n<e.length;n++){var i=e[n].c;i.attr("path");t(i,"from",e[n])}for(var r=0;r<o.length;r++){t(o[r].c,"to",o[r])}},t.prototype.toJson=function(){var t={NodeType:this.NodeType,opt:this.opt,c:{attr:this.c.attr()}};return this.label&&(t.label={attr:this.label.attr()}),t},t.prototype.getPLen=function(t,e){return Math.pow(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),.5)},t.prototype._updAttr=function(t){for(var e in t)void 0!==this.opt[e]&&(this.opt[e]=t[e]);return this},t.prototype._getTextPnt=function(){var t=this.opt;return{x:t.cx+1,y:t.cy+1}},t.prototype.delete=function(){this.c.remove(),this.label&&this.label.remove(),this.inlineEle&&this.inlineEle.remove(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.remove()}),this.removeBox()},t.prototype.hide=function(){return this.c&&this.c.hide(),this.label&&this.label.hide(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.hide()}),this.inlineEle&&this.inlineEle.hide(),this},t.prototype.show=function(){return this.c&&this.c.show(),this.label&&this.label.show(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.show()}),this.inlineEle&&this.inlineEle.show(),this},t.prototype.moveable=function(t){var e=this;t="object"==typeof t?t:{},this.c.undrag();var o={cx:0,cy:0};return this.c.drag(function(n,i){n+=o.cx,i+=o.cy,e.updAttr({cx:n,cy:i}),e.select(),t.afterUpd&&"function"==typeof t.afterUpd&&t.afterUpd(n,i,e)},function(){var t=e.opt,n=t.cx,i=t.cy;o={cx:n,cy:i}}),e},t.prototype.updAttr=function(t){return this},t.prototype.getBBox=function(){var t=this.c.getBBox(),e=t.x,o=t.y,n=t.width,i=t.height,r=(e-=3)+(n+=6)/2,a=e+n,s=(o-=3)+(i+=6)/2,c=o+i;return{attr:{x:e,y:o,width:n,height:i},ps:{a:{x:e,y:o},b:{x:r,y:o},c:{x:a,y:o},d:{x:a,y:s},e:{x:a,y:c},f:{x:r,y:c},g:{x:e,y:c},h:{x:e,y:s}}}},t.prototype.magnCore=function(t,e){var o,n=this.getBBox(),i=n.attr,r=n.ps,a=i.x,s=i.y,c=i.width,h=(i.height,a+c/4),p=a+.75*c,l=s+c/4,u=s+.75*c,f=null;t<=h&&e<=l?(o=r.a,f="a"):t>h&&t<p&&e<=l?(o=r.b,f="b"):t>=p&&e<=l?(o=r.c,f="c"):t>=p&&e>l&&e<u?(o=r.d,f="d"):t>=p&&e>=u?(o=r.e,f="e"):t>h&&t<p&&e>=u?(o=r.f,f="f"):t<=h&&e>=u?(o=r.g,f="g"):t<=h&&e>l&&e<u&&(o=r.h,f="h"),this.clearTmpElem("mc"),o&&(this.tRElem.mc=this.paper.circle(o.x,o.y,3).attr("fill",this.opt.bkgMagnetic).data("pcode",this.code).data("posi",f));var d;return this.tRElem.mc&&(d=this.tRElem.mc),d},t.prototype.select=function(){var t=this.getBBox(),e=t.attr,o=t.ps,n=e.x,i=e.y,r=e.width,a=e.height,s=this.paper;this.removeBox(),this.isSelEd=!0,this.tRElem.box=s.rect(n,i,r,a).attr({stroke:"#0033FF","stroke-width":"0.8"});for(var c in o){var h=o[c],p=h.x,l=h.y;this.tRElem["__p"+c]=s.circle(p,l,2).attr("fill","#000000").data("pcode",this.code).data("posi",c),this.onCreateBoxPnt(this.tRElem["__p"+c])}return this},t.prototype.removeBox=function(){this.tRElem||(this.tRElem={}),this.tRElem.box&&(this.tRElem.box.remove(),delete this.tRElem.box);for(var t in this.tRElem)t.indexOf("__p")>-1&&(this.tRElem[t].remove(),delete this.tRElem[t]);return this.isSelEd=!1,this},t.prototype.zoomOut=function(t){t=t||.05;this.c;var e=this.opt;return e.w=e.w*(1+t),e.h=e.h*(1+t),this.updAttr({w:e.w,h:e.h}),this.select(),this},t.prototype.zoomIn=function(t){t=t||.05;this.c;var e=this.opt;return e.w=e.w*(1-t),e.h=e.h*(1-t),this.updAttr({w:e.w,h:e.h}),this.select(),this},t.prototype.move=function(t,e){e=e||.05;var o,n=this.opt;switch(t=t?t.toUpperCase():t){case"T":o={cy:n.cy*(1-e)};break;case"B":o={cy:n.cy*(1+e)};break;case"L":o={cx:n.cx*(1-e)};break;case"R":o={cx:n.cx*(1+e)}}return o&&(this.updAttr(o),this.select()),this},t.prototype.move2T=function(t){return this.move("T",t),this},t.prototype.move2B=function(t){return this.move("B",t),this},t.prototype.move2L=function(t){return this.move("L",t),this},t.prototype.move2R=function(t){return this.move("R",t),this},t.prototype.background=function(t){switch(t&&(t=t.toLowerCase()),t){case"magn":this.c.attr("fill",this.opt.bkgMagnetic);break;default:this.c.attr("fill",this.opt.bkg)}return this},t.prototype.clearTmpElem=function(t){var e=this;if(t){var o=[];o="object"==typeof t?t:[t],n.a.each(this.tRElem,function(t,n){$.inArray(t,o)>-1&&(n.remove(),delete e.tRElem[t])})}else n.a.each(this.tRElem,function(t,o){o.remove(),delete e.tRElem[t]});return this},t.prototype.onCreateBoxPnt=function(t){},t}();e.a=i},function(t,e,o){"use strict";o.d(e,"a",function(){return n});var n=function(){function t(){}return t.clone=function(t){t="object"==typeof t?t:{};return $.extend(!0,{},t)},t.ArrayMergeSameValue=function(t){if("object"==typeof t&&t.length&&t.length>1){for(var e={},o=[],n=0;n<t.length;n++)e[t[n]]||(o.push(t[n]),e[t[n]]=!0);t=o}return t},t.each=function(t,e){if("object"==typeof t)if($.isArray(t))for(var o=0;o<t.length&&!1!==e(o,t[o]);o++);else for(var n in t)if(!1===e(n,t[n]))break},t.ucFirst=function(t,e){e=e||"_";var o=t.split(e);return o.forEach(function(t,e){o[e]=t.substr(0,1).toUpperCase()+t.substr(1)}),o.join("")},t.isArray=function(t){return"object"==typeof t&&t instanceof Array},t.jsonMerge=function(e,o){return e=e||{},t.each(o,function(t,o){e[t]=o}),e},t}()},function(t,e,o){"use strict";o.d(e,"a",function(){return y});var n=o(1),i=o(9),r=o(10),a=o(11),s=o(12),c=o(13),h=o(14),p=o(15),l=o(16),u=o(17),f=o(18),d=o(19),y=function(){function t(t){this.paper=t}return t.prototype.make=function(t,e){var o,y=n.a.ucFirst(t),v=this.paper;switch(y){case"Begin":o=new i.a(v,e);break;case"Task":o=new r.a(v,e);break;case"Audit":o=new a.a(v,e);break;case"Sign":o=new s.a(v,e);break;case"Cond":o=new c.a(v,e);break;case"SubFlow":o=new h.a(v,e);break;case"Parallel":o=new p.a(v,e);break;case"Merge":o=new l.a(v,e);break;case"End":o=new u.a(v,e);break;case"Ln":o=new f.a(v,e);break;case"LnPoly":o=new d.a(v,e)}return o},t}()},function(t,e,o){var n,i;n=[o(4),o(5)],void 0===(i=function(t,e){window.Raphael=t;return"function"==typeof e.default?e.default:e}.apply(e,n))||(t.exports=i)},function(e,o){e.exports=t},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(6),i=o(7),r=o(1),a=o(8),s=o(2),c=o(21),h=function(){function t(t){this.idxDick={c:0,n:0},this.nodeDick={},this.connDick={},this.tmpNodeMap={},this.config=t,this.paper=n.a.createInstance(t),this.ndMer=new s.a(this.paper),this._configMergeToDefule(),this._rIdx=0,this._code2EidDick={},this._LineDragingP=null,this.lineQueues=[],this.textQueues=[],this.tempNodes=[],this.MagneticCore=null,this._cerateToolBar(),this.config.stepCfg}return t.prototype._configMergeToDefule=function(){var t=this.config.pkgClr||{};t.start=t.start||"rgb(181, 216, 126)",t.opera=t.opera||"rgb(224, 223, 226)",t.judge=t.judge||"rgb(49, 174, 196)",t.end=t.end||"rgb(34, 185, 41)",t.arrow=t.arrow||"rgb(3, 84, 41)",t.NodeBox=t.NodeBox||"rgb(15, 13, 105)",this.config.pkgClr=t,this.config.prefCode=this.config.prefCode||"A",this.config.listener=this.config.listener||{},this.config.noToolBar=this.config.noToolBar||!1},t.prototype._lineMoveSync=function(t,e,o){var n=o.conLns,i=n.from,a=n.to,s=this;r.a.each(i,function(t,e){var n=s.connDick[e];if("ln"==n.NodeType){n.data("from_code");var i=n.data("from_posi"),r=o.getBBox().ps;n.updAttr({P1:r[i]})}}),r.a.each(a,function(n,i){var r=s.connDick[i];if("ln"==r.NodeType){r.updAttr({P2:{x:t,y:e}});r.data("to_code");var a=r.data("to_posi"),c=o.getBBox().ps;r.updAttr({P2:c[a]})}})},t.prototype._cerateToolBar=function(){var t=this;if(this.config.noToolBar)return null;this.toolbarCtrl=new a.a(this.paper,this.config);var e=this,o=e.toolbarCtrl,n=o.tBodyNds,i=o.cBodyNds,s=o.connElems;r.a.each(n,function(t,o){var n,i={x:0,y:0};o.c.drag(function(t,e){t+=i.x,e+=i.y,n&&n.updAttr({cx:t,cy:e})},function(){var r=o.opt,a=r.cx,s=r.cy;i.x=a,i.y=s;var h={cx:a+=25,cy:s,w:50,h:40};c.a[t]&&(h.text=c.a[t].text),n=e.ndMer.make(t,h).creator().moveable({afterUpd:function(t,o,n){e._lineMoveSync(t,o,n)}}),e._nodeBindEvt(n);var p=e._getOrderCode();n.data("_code",p),e.nodeDick[p]=n},function(){console.log(this,"测试：end")})});var h=s.lnCon,p=s.lnPolyCon,l=e.toolbarCtrl.config,u=l.lnSeledBkg,f=l.lnDefBkg;h.data("con","ln"),p.data("con","lnPoly"),this.lineCnMode={isSelEd:!1,type:null};var d=function(){r.a.each(i,function(t,e){e.isSelEd=!1}),t.lineCnMode={isSelEd:!1,type:null},h.attr("fill",f),p.attr("fill",f)},y=function(){var t=e.getSelected();t&&t.select()};r.a.each(i,function(t,o){o.c.click(function(){var t=o.isSelEd;d(),t||(o.isSelEd=!0,e.lineCnMode={isSelEd:!0,type:o.NodeType},"ln"==o.NodeType?h.attr("fill",u):p.attr("fill",u),y())})});var v=function(){!e.lineCnMode.isSelEd||e.lineCnMode.isSelEd&&this.data("con")!=e.lineCnMode.type?(d(),this.attr("fill",u),e.lineCnMode={isSelEd:!0,type:this.data("con")},y()):d()};h.click(v),p.click(v)},t.prototype._nodeBindEvt=function(t){var e=this,o=this.ndMer,n=function(t){t.c.click(function(){e.removeAllSeled(),t.select()}),t.onCreateBoxPnt=function(t){var n;if(e.lineCnMode.isSelEd){var i={x:0,y:0};t.drag(function(t,o){if(n){t+=i.x,o+=i.y;var r=e.collisionByP(t,o);if(e.allBackground(),r){var a=r.magnCore(t,o);a&&(t=a.attr("cx"),o=a.attr("cy"),n.data("to_code",a.data("pcode")).data("to_posi",a.data("posi"))),r.background("magn")}else n.data("to_code",null).data("to_posi",null);"ln"==e.lineCnMode.type&&n.updAttr({P2:{x:t,y:o}})}else console.log("选择框连线拖动出错！")},function(){e.removeTmpNode("connLnIst"),e.rmAllLnSeled(),i.x=this.attr("cx"),i.y=this.attr("cy");var r={},a=i.x,s=i.y;r="ln"==e.lineCnMode.type?{P1:{x:a,y:s},P2:{x:a+10,y:s+5}}:{P1:{x:a,y:s},P2:{x:a+4,y:s+4},h:4},n=o.make(e.lineCnMode.type,r).creator().data("from_code",t.data("pcode")).data("from_posi",t.data("posi")),e.tmpNodeMap.connLnIst=n},function(){if(n.data("to_code")&&n.data("to_posi")){var t=e._order("c","C"),o=n.data("from_code"),i=n.data("to_code");n.data("_code",t);var r=e.nodeDick[o],a=e.nodeDick[i];r.line(t),r.clearTmpElem("mc"),a.line(t,!0),a.clearTmpElem("mc"),e.allBackground(),e._lineBindEvt(n),e.connDick[t]=n,e.tmpNodeMap.connLnIst=null}e.removeTmpNode("connLnIst")})}}};if(t)n(t);else for(var i in this.nodeDick)n(this.nodeDick[i])},t.prototype._lineBindEvt=function(t){var e=this;t&&"ln"==t.NodeType&&(t.onCreateBoxPnt=function(o){o.data("pcode");var n=o.data("posi");if("f"==n){var i={x:0,y:0};o.drag(function(o,n){o+=i.x,n+=i.y;var r=e.collisionByP(o,n),a=t.data("from_code"),s=t.code;if(a&&e.nodeDick[a].rmLine(s),e.allBackground(),r){var c=r.magnCore(o,n);c&&(o=c.attr("cx"),n=c.attr("cy"),t.data("from_code",c.data("pcode")).data("from_posi",c.data("posi"))),r.background("magn"),r.line(s)}else t.data("from_code",null).data("from_posi",null);t.updAttr({P1:{x:o,y:n}})},function(){i.x=this.attr("cx"),i.y=this.attr("cy")},function(){})}else if("t"==n){var r={x:0,y:0};o.drag(function(o,n){o+=r.x,n+=r.y;var i=e.collisionByP(o,n),a=t.data("to_code"),s=t.code;if(a&&e.nodeDick[a].rmLine(s,!0),e.allBackground(),i){var c=i.magnCore(o,n);c&&(o=c.attr("cx"),n=c.attr("cy"),t.data("to_code",c.data("pcode")).data("to_posi",c.data("posi"))),i.background("magn"),i.line(s,!0)}else t.data("to_code",null).data("to_posi",null);t.updAttr({P2:{x:o,y:n}})},function(){r.x=this.attr("cx"),r.y=this.attr("cy")},function(){})}},t.c.click(function(){e.removeAllSeled(),t.select()}))},t.prototype.removeAllSeled=function(){this.rmAllNdSeled(),this.rmAllLnSeled()},t.prototype.allSelect=function(){this.allNodeSelect()},t.prototype.allNodeSelect=function(){for(var t in this.nodeDick){this.nodeDick[t].select()}},t.prototype.rmAllNdSeled=function(){for(var t in this.nodeDick){var e=this.nodeDick[t];e.isSelEd&&e.removeBox()}},t.prototype.rmAllLnSeled=function(){for(var t in this.connDick){var e=this.connDick[t];e.isSelEd&&e.removeBox()}},t.prototype.allBackground=function(t){r.a.each(this.nodeDick,function(e,o){o.background(t)})},t.prototype._getOrderCode=function(){this._rIdx+=1;var t=this.config.prefCode+this._rIdx;return this._code2EidDick[t]&&(t=this._getOrderCode()),t},t.prototype._order=function(t,e){var o;return t&&void 0!==this.idxDick[t]&&(this.idxDick[t]+=1,o=this.idxDick[t]),e&&(o=e+o),o},t.prototype.removeTempNodes=function(){for(var t=this.tempNodes,e=0;e<t.length;e++){t[e].remove()}},t.prototype.last=function(){var t=null;for(var e in this.nodeDick)t=this.nodeDick[e];return t},t.prototype.remove=function(t){var e=this,o=!1,n=function(n){if(n){t=n.code,n.delete(),delete e.nodeDick[t],o=!0;var i=e.last();i&&i.select()}};return n(t?this.nodeDick[t]:this.getSelected()),o},t.prototype.tab=function(){var t=this.getSelected(),e=t?t.code:null,o=!1,n=!1;for(var i in this.nodeDick){var r=this.nodeDick[i];if(!t){r.select(),n=!0;break}if(o){this.removeAllSeled(),r.select(),n=!0;break}e==r.code&&(o=!0)}o&&!n&&(this.removeAllSeled(),this.tab())},t.prototype.clone=function(t){var e,o,n=this;if(e=t&&"string"==typeof t?this.nodeDick[t]:t&&"object"==typeof t?t:this.getSelected()){var i=$.extend(!0,{},e.opt);i.cx+=.2*i.w,i.cy+=.2*i.h,o=this.ndMer.make(e.NodeType,i).creator().moveable({afterUpd:function(t,e,o){n._lineMoveSync(t,e,o)}}),this.removeAllSeled(),o.select(),this._nodeBindEvt(o);var r=this._getOrderCode();o.data("_code",r),this.nodeDick[r]=o}return o},t.prototype.removeIntersectMk=function(){for(var t=this.nodeQueues,e=null,o=0;o<t.length;o++){var n=t[o];if(n._IntersectMk){n._IntersectMk=!1;var i=n.NodeType,r=this.config.pkgClr;r[i]?n.c.attr("fill",r[i]):1==(i=n.c.data("type"))?n.c.attr("fill",r.start):9==i&&n.c.attr("fill",r.end),e=n}}return e},t.prototype.removeConLine=function(t,e){if(t&&e)for(var o=this.nodeQueues,n=t.c.id,i=0;i<o.length;i++){var r=o[i],a=e+"Line";if(r[a]&&r[a].length){for(var s=r[a],c=[],h=0;h<s.length;h++){var p=s[h];n!=p.c.id&&c.push(p)}r[a]=c}}return!1},t.prototype.removeAll=function(){return this.removeAllText(),this.removeAllLine(),this.removeAllNode(),this},t.prototype.removeAllNode=function(){for(var t=this.nodeQueues,e=0;e<t.length;e++){var o=t[e];o.label&&o.label.remove(),o.c.remove()}return this.nodeQueues=[],this},t.prototype.removeAllLine=function(){for(var t=this.lineQueues,e=0;e<t.length;e++){t[e].c.remove()}return this.lineQueues=[],this},t.prototype.removeAllText=function(){for(var t=this.textQueues,e=0;e<t.length;e++){t[e].remove()}return this.textQueues=[],this},t.prototype.getNodeByCode=function(t){for(var e=null,o=this.nodeQueues,n=0;n<o.length;n++){var i=o[n];if(i.c.data("code")==t){e=i;break}}return e},t.prototype.getNodeByEid=function(t){for(var e=null,o=this.nodeQueues,n=0;n<o.length;n++){var i=o[n];if(i.c.id==t){e=i;break}}return e},t.prototype.code2Id=function(t,e){if(t&&!e)return this._code2EidDick[t]||null;if(e&&!t){var o=this._code2EidDick;for(var n in o)if(e==o[n])return n;return null}return e&&t?(this._code2EidDick[t]=e,this):void 0},t.prototype.setOption=function(t,e){if(t){"object"!=typeof t&&(t={text:t}),e||(e=this.getSelected());var o="object"==typeof e?e:this.getNodeByCode(e);o&&t.text&&o.label&&(o.label.attr("text",t.text),o.opt=o.opt||{},o.opt.text=t.text,"function"==typeof o.resizeByText&&o.resizeByText())}return!1},t.prototype.cloneNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this.paper.getById(t);if("object"==typeof e){e.id;return e.c.clone(),e.label.clone(),!0}}return!1},t.prototype.getSelected=function(){this.nodeQueues;var t=null;for(var e in this.nodeDick)if(this.nodeDick[e].isSelEd){t=this.nodeDick[e];break}if(!t)for(var o=this.lineQueues,n=0;n<o.length;n++){var i=o[n];i.selectEdMk&&(t=i)}return t},t.prototype.getLastElem=function(){var t=null,e=this.nodeQueues;return e.length>0&&(t=e[e.length-1]),t},t.prototype.getFlowStep=function(){for(var t=[],e=this.nodeQueues,o=0;o<e.length;o++){var n=e[o],i=this.getFlowJson(n);t.push(i)}return t},t.prototype.getFlowJson=function(t){t||(t=this.getSelected());var e={};if(t){var o=t.label||null,n=t.c;e={name:o?o.attr("text"):"",code:n.data("code"),type:n.data("type"),_struct:t.toJson()};for(var i=t.toLine,r=[],a=0;a<i.length;a++){(p=this.getLineCntCode("from",i[a].c.id,t))&&r.push(p)}e.prev=r.length>0?r.join(","):"";for(var s=t.fromLine,c=[],h=0;h<s.length;h++){var p;(p=this.getLineCntCode("to",s[h].c.id,t))&&c.push(p)}e.next=c.length>0?c.join(","):""}else e=null;return e},t.prototype.getLineCntCode=function(t,e,o){if(t&&e){var n=this.nodeQueues,i=null;o&&(i="string"==typeof o?o:o.c.data("code"));for(var r=t+"Line",a=0;a<n.length;a++){var s=n[a],c=s.c.data("code");if(i!=c)for(var h=s[r],p=0;p<h.length;p++){if(e==h[p].c.id)return c}}}return null},t.prototype.removeTmpNode=function(t){var e=this;if(t){var o=[];o="object"==typeof t?t:[t],r.a.each(o,function(t,o){e.tmpNodeMap[o]&&(e.tmpNodeMap[o].delete(),delete e.tmpNodeMap[o])})}else r.a.each(this.tmpNodeMap,function(t,o){o.delete(),delete e.tmpNodeMap[t]});return this},t.prototype.collisionByP=function(t,e){var o;if("object"==typeof t){var n=t.x,i=t.y;t=n,e=i}return t&&e&&r.a.each(this.nodeDick,function(n,i){var r=i.getBBox(),a=r.attr,s=(r.ps,a.width),c=a.height,h=a.x,p=a.y;if(t>=h&&t<=h+s&&e>=p&&e<=p+c)return o=i,!1}),o},t.prototype.onNodeClick=function(t){},t.version=i.a,t}();e.default=h},function(t,e,o){"use strict";var n=0,i={},r=function(){function t(){}return t.createInstance=function(t){return(t="object"==typeof t?t:{}).dom,"string"==typeof t.dom&&(t.dom=$(t.dom)),t.w||(t.w=1.1*$(window).width()),t.h||(t.h=1.1*$(window).height()),Raphael(t.dom.get(0),t.w,t.h)},t.onMoveEvt=function(){},t.onStartEvt=function(){},t.onEndEvt=function(){},t.getIndex=function(){return n+=1},t.src=function(t,e,o){i[t]||(i[t]={});var n=i[t];return void 0===e?n:void 0===o?n[e]||null:void(n[e]=o)},t}();e.a=r},function(t,e,o){"use strict";o.d(e,"a",function(){return n});var n={version:"2.0.13",release:"20180412",author:"Joshua Conero"}},function(t,e,o){"use strict";var n=o(2),i=o(20),r=o(1),a=function(){function t(t,e){this._tools=[],this.rData={cp:{x:5,y:5},th0:23,th1:23,th2:23,nh:0,ch:0,cw:75},this.paper=t,this.ndMer=new n.a(this.paper),this.option=e,this.config=e.toolBar||{},this.config.aUpSrc=i.a.value(this.config,"aUpSrc","arrow_up.png"),this.config.aDownSrc=i.a.value(this.config,"aDownSrc","arrow_down.png"),this._headBar(),this._nodeBar(),this._connBar()}return t.prototype._headBar=function(){var t,e=this,o=this.rData,n=o.cp,r=o.cw,a=o.th0,s=n.x,c=n.y,h=this.paper;this.headElems={},t=h.rect(s,c,r,a).attr("fill","#ffffff").click(function(){"H"!=this.data("toggle")?(this.data("toggle","H"),e.toggle("H")):(this.data("toggle","S"),e.toggle("S"))}),this.headElems.con=t,t=h.text(s+r/2,c+10,i.a.value(this.config,"title","工具栏")),this.headElems.title=t},t.prototype._nodeBar=function(){var t,e=this,o=this.rData,n=o.cp,i=o.cw,r=o.th1,a=o.nh,s=n.x,c=n.y,h=this.paper,p=this.ndMer,l=this.config,u={};this.nodeElems={},c+=r,this.nodeElems.title=h.rect(s,c,i,23).attr("fill","#ffffff").click(function(){var t=this.data("toggle"),o=e.nodeElems.icon;"H"!=t?(this.data("toggle","H"),o&&o.attr("src",l.aDownSrc),e.tToggle("H")):(this.data("toggle","S"),o&&o.attr("src",l.aUpSrc),e.tToggle("S"))}),this.nodeElems.icon=h.image(l.aUpSrc,s+.7*i,c+1,20,20),a=c,c+=23,this.nodeElems.tBody=h.rect(s,c,i,250).attr("fill","#ffffff"),s+=20,c+=10,t=p.make("begin",{cx:s,cy:c,w:16,h:12}).creator(),u.begin=t,c+=20,t=p.make("task",{cx:s,cy:c,w:16,h:12}).creator(),u.task=t,c+=20,t=p.make("audit",{cx:s,cy:c,w:16,h:12}).creator(),u.audit=t,c+=20,t=p.make("sign",{cx:s,cy:c,w:16,h:12}).creator(),u.sign=t,c+=20,t=p.make("cond",{cx:s,cy:c,w:16,h:12}).creator(),u.cond=t,c+=20,t=p.make("subFlow",{cx:s,cy:c,w:16,h:12}).creator(),u.subFlow=t,c+=30,t=p.make("parallel",{cx:s,cy:c,w:16,h:12}).creator(),u.parallel=t,c+=20,t=p.make("merge",{cx:s,cy:c,w:16,h:12}).creator(),u.merge=t,c+=20,t=p.make("end",{cx:s,cy:c,w:16,h:12}).creator(),u.end=t,this.tBodyNds=u,this.rData.nh=c-a,this.nodeElems.tBody.attr("height",this.rData.nh)},t.prototype._connBar=function(){var t,e=this,o=this.rData,n=o.cp,i=o.cw,r=o.th2,a=o.ch,s=o.th0,c=o.th1,h=o.nh,p=n.x,l=n.y,u=this.paper,f=this.ndMer,d=this.config,y={};this.connElems={},l+=s+c+h,this.connElems.title=u.rect(p,l,i,r).attr("fill","#ffffff").click(function(){var t=this.data("toggle"),o=e.connElems.icon;"H"!=t?(this.data("toggle","H"),o&&o.attr("src",d.aDownSrc),e.cToggle("H")):(this.data("toggle","S"),o&&o.attr("src",d.aUpSrc),e.cToggle("S"))}),this.connElems.icon=u.image(d.aUpSrc,p+.7*i,l+1,20,20),a=l,l+=r;this.config.lnSeledBkg=this.config.lnSeledBkg||"#CCFF99",this.config.lnDefBkg=this.config.lnDefBkg||"#ffffff";var v=this.config.lnDefBkg;this.connElems.lnCon=u.rect(p,l,i,30).attr("fill",v);var x=l+10.5,g=p+20;t=f.make("ln",{P1:{x:g-5,y:x},P2:{x:g+25,y:x}}).creator(),y.ln=t,l+=20,this.connElems.lnPolyCon=u.rect(p,l,i,30).attr("fill",v),x=l+10.5,g=p+20,t=f.make("lnPoly",{P1:{x:g-5,y:x},P2:{x:g+20,y:x+4},h:4}).creator(),y.lnPoly=t,this.cBodyNds=y,a=l-a,this.connElems.lnCon.attr("height",a/2),this.connElems.lnPolyCon.attr("height",a/2)},t.prototype.connSizeNode=function(t){var e=this.connElems,o=e.title,n=e.icon,i=e.lnCon,r=e.lnPolyCon,a=this.rData,s=a.cp,c=(a.cw,a.th2),h=(a.ch,a.th0),p=a.th1,l=a.nh,u=s.x,f=s.y,d=this.cBodyNds,y=d.ln,v=d.lnPoly;f+=t?h+p+l:h+p,o.attr("y",f),n.attr("y",f+1),f+=c;i.attr("y",f);var x=f+10.5,g=u+20;y.updAttr({P1:{x:g-5,y:x},P2:{x:g+25,y:x}}),f+=20,r.attr("y",f),x=f+10.5,g=u+20,v.updAttr({P1:{x:g-5,y:x},P2:{x:g+20,y:x+4},h:4})},t.prototype.tToggle=function(t,e){var o=this.tBodyNds,n=this.nodeElems,i=n.tBody;"H"!=t?(r.a.each(o,function(t,e){e.show()}),e&&(n.title.show(),n.icon.show()),i&&i.show(),this.connSizeNode(!0)):(r.a.each(o,function(t,e){e.hide()}),e&&(n.title.hide(),n.icon.hide()),i&&i.hide(),this.connSizeNode())},t.prototype.cToggle=function(t,e){var o=this.cBodyNds,n=this.connElems,i=n.lnCon,a=n.lnPolyCon;"H"!=t?(r.a.each(o,function(t,e){e.show()}),e&&(n.title.show(),n.icon.show()),i&&i.show(),a&&a.show()):(r.a.each(o,function(t,e){e.hide()}),e&&(n.title.hide(),n.icon.hide()),i&&i.hide(),a&&a.hide())},t.prototype.toggle=function(t){this.tToggle(t,!0),this.cToggle(t,!0)},t}();e.a=a},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="begin"},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#851E07";var t=this.opt;if(this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",t.bkg),t.text){var e=this._getTextPnt(),o=e.x,n=e.y;this.label=this.paper.text(o,n,t.text)}},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;if(this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2}),this.label){var o=this._getTextPnt(),n=o.x,i=o.y;this.label.attr({x:n,y:i})}return this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="task"},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#88EEEA";var t=this.opt2Attr(),e=this.opt,o=e.bkg;if(this.c=this.paper.rect(t.x,t.y,t.w,t.h),this.c.attr("fill",o),e.text){var n=this._getTextPnt(),i=n.x,r=n.y;this.label=this.paper.text(i,r,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt;return{x:e.cx-e.w/2,y:e.cy-e.h/2,w:e.w,h:e.h}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),o={x:e.x,y:e.y,width:e.w,height:e.h};if(this.c.attr(o),this.label){var n=this._getTextPnt(),i=n.x,r=n.y;this.label.attr({x:i,y:r})}return this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="audit",this.xRate=.2},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#88EEEA";var t=this.opt2Attr(),e=this.opt;if(this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e.bkg),e.text){var o=this._getTextPnt(),n=o.x,i=o.y;this.label=this.paper.text(n,i,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx,n=e.cy,i=e.w,r=e.h,a=this.xRate;return[{x:o-i/2,y:n-r/2},{x:o+i/2+i*a,y:n-r/2},{x:o+i/2,y:n+r/2},{x:o-i/2-i*a,y:n+r/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();if(this.c.attr("path",this._ps2PathAttr(e,!0)),this.label){var o=this._getTextPnt(),n=o.x,i=o.y;this.label.attr({x:n,y:i})}return this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="sign",this.xRate=.2},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#88EEEA";var t=this.opt2Attr(),e=this.opt,o=e.bkg;if(this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",o),e.text){var n=this._getTextPnt(),i=n.x,r=n.y;this.label=this.paper.text(i,r,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx,n=e.cy,i=e.w,r=e.h,a=this.xRate;return[{x:o-i/2-i*a,y:n-r/2},{x:o+i/2+i*a,y:n-r/2},{x:o+i/2,y:n+r/2},{x:o-i/2,y:n+r/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();if(this.c.attr("path",this._ps2PathAttr(e,!0)),this.label){var o=this._getTextPnt(),n=o.x,i=o.y;this.label.attr({x:n,y:i})}return this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="cond"},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#88EEEA";var t=this.opt2Attr(),e=this.opt;if(this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e.bkg),e.text){var o=this._getTextPnt(),n=o.x,i=o.y;this.label=this.paper.text(n,i,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx,n=e.cy,i=e.w,r=e.h;return[{x:o,y:n-r/2},{x:o+i/2,y:n},{x:o,y:n+r/2},{x:o-i/2,y:n}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();if(this.c.attr("path",this._ps2PathAttr(e,!0)),this.label){var o=this._getTextPnt(),n=o.x,i=o.y;this.label.attr({x:n,y:i})}return this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="sub_flow",this.xRate=.15},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#88EEEA";var t=this.opt2Attr(),e=t.cAttr,o=t.lLine,n=t.rLine,i=this.opt,r=i.bkg;if(this.c=this.paper.rect(e.x,e.y,e.w,e.h),this.c.attr("fill",r),this.inlinesEle=[this.paper.path(this._ps2Path(o)),this.paper.path(this._ps2Path(n))],i.text){var a=this._getTextPnt(),s=a.x,c=a.y;this.label=this.paper.text(s,c,i.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx-e.w/2,n=e.cy-e.h/2,i=e.w,r=e.h,a=this.xRate;return{cAttr:{x:o,y:n,w:i,h:r},lLine:[{x:o+i*a,y:n},{x:o+i*a,y:n+r}],rLine:[{x:o+i-i*a,y:n},{x:o+i-i*a,y:n+r}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),o=e.cAttr,n=e.lLine,i=e.rLine;if(this.c.attr({x:o.x,y:o.y,width:o.w,height:o.h}),this.inlinesEle[0].attr("path",this._ps2PathAttr(n)),this.inlinesEle[1].attr("path",this._ps2PathAttr(i)),this.label){var r=this._getTextPnt(),a=r.x,s=r.y;this.label.attr({x:a,y:s})}return this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="parallel",this.xRate=.2},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#88EEEA";var t=this.opt2Attr(),e=this.opt.bkg;this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlineEle=this.paper.path(this._ps2Path(t.inLine))},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx-e.w/2,n=e.cy-e.h/2,i=e.w,r=e.h,a=i*(1-2*this.xRate);return{cAttr:[{x:o-a/2,y:n-r/2},{x:o+a/2,y:n-r/2},{x:o+i/2,y:n},{x:o+a/2,y:n+r/2},{x:o-a/2,y:n+r/2},{x:o-i/2,y:n}],inLine:[{x:o-a/2-.1*a,y:n},{x:o+a/2+.1*a,y:n}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),o=e.cAttr,n=e.inLine;return this.c.attr("path",this._ps2PathAttr(o,!0)),this.inlineEle.attr("path",this._ps2PathAttr(n)),this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="merge",this.xRate=.2},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#88EEEA";var t=this.opt2Attr(),e=this.opt.bkg;this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlinesEle=[this.paper.path(this._ps2Path(t.vLine)),this.paper.path(this._ps2Path(t.hLine))]},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx-e.w/2,n=e.cy-e.h/2,i=e.w,r=e.h,a=i*(1-2*this.xRate);return{cAttr:[{x:o-a/2,y:n-r/2},{x:o+a/2,y:n-r/2},{x:o+i/2,y:n},{x:o+a/2,y:n+r/2},{x:o-a/2,y:n+r/2},{x:o-i/2,y:n}],vLine:[{x:o,y:n-r/2*.8},{x:o,y:n+r/2*.8}],hLine:[{x:o-a/2-.1*a,y:n},{x:o+a/2+.1*a,y:n}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),o=e.cAttr,n=e.vLine,i=e.hLine;return this.c.attr("path",this._ps2PathAttr(o,!0)),this.inlinesEle[0].attr("path",this._ps2PathAttr(n)),this.inlinesEle[1].attr("path",this._ps2PathAttr(i)),this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="end"},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"#2EF25F";var t=this.opt;if(this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",this.opt.bkg),t.text){var e=this._getTextPnt(),o=e.x,n=e.y;this.label=this.paper.text(o,n,t.text)}},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;if(this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2}),this.label){var o=this._getTextPnt(),n=o.x,i=o.y;this.label.attr({x:n,y:i})}return this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=o(0),i=o(1),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._onInit=function(){this.NodeType="ln",this.data("maxR",5)},e.prototype._whenCreatorEvt=function(){this.opt.bkg=this.opt.bkg||"rgb(3, 84, 41)";this.opt.bkg;this.c=this.paper.path(this._ps2Path(this.opt2Attr())),this.c.attr("fill",this.opt.bkg)},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.P1,n=e.P2,i=e.r||.2*this.getLen(),r=this.data("maxR");i>r&&(i=r);var a=Math.atan2(o.y-n.y,n.x-o.x)*(180/Math.PI),s=n.x-i*Math.cos(a*(Math.PI/180)),c=n.y+i*Math.sin(a*(Math.PI/180));return[o,n,{x:s+i*Math.cos((a+120)*(Math.PI/180)),y:c-i*Math.sin((a+120)*(Math.PI/180))},{x:s+i*Math.cos((a+240)*(Math.PI/180)),y:c-i*Math.sin((a+240)*(Math.PI/180))},n]},e.prototype.updAttr=function(t){return this._updAttr(t),this.c.attr("path",this._ps2PathAttr(this.opt2Attr())),this},e.prototype.getLen=function(t){var e=t||this.opt,o=e.P1,n=e.P2;return this.getPLen(o,n)},e.prototype.select=function(){var t=this,e=this.getFocusPoint();return this.removeBox(),this.isSelEd=!0,i.a.each(e,function(e,o){var n=t.paper.circle(o.x,o.y,3).attr("fill",t.feature("focusPBkg",null,"#990000")).data("pcode",t.code).data("posi",e);t.tRElem["__p"+e]=n,t.onCreateBoxPnt(t.tRElem["__p"+e])}),this},e.prototype.getFocusPoint=function(){var t=this.opt,e=t.P1,o=t.P2,n=this.getPLen(e,o),i=this.c.getPointAtLength(n/2);return{f:e,m:{x:i.x,y:i.y},t:o}},e}(n.a);e.a=a},function(t,e,o){"use strict";var n=o(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="ln_poly"},e.prototype._whenCreatorEvt=function(){this.c=this.paper.path(this._ps2Path(this.opt2Attr()))},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.P1,n=e.P2,i=e.h||4,r=e.rX||.35,a=this.getLen(),s=e.r||a*(1-r)*.2,c={x:o.x+a*r,y:o.y+i},h=Math.atan2(c.y-n.y,n.x-c.x)*(180/Math.PI),p=n.x-s*Math.cos(h*(Math.PI/180)),l=n.y+s*Math.sin(h*(Math.PI/180)),u=p+s*Math.cos((h+120)*(Math.PI/180)),f=l-s*Math.sin((h+120)*(Math.PI/180)),d=p+s*Math.cos((h+240)*(Math.PI/180)),y=l-s*Math.sin((h+240)*(Math.PI/180));return[o,{x:o.x+a*r,y:o.y},c,c,n,{x:u,y:f},{x:d,y:y},n]},e.prototype.getLen=function(t){var e=t||this.opt,o=e.P1,n=e.P2;return this.getPLen(o,n)},e.prototype.updAttr=function(t){return this._updAttr(t),this.c.attr("path",this._ps2PathAttr(this.opt2Attr())),this},e}(n.a);e.a=r},function(t,e,o){"use strict";var n=function(){function t(t){"object"!=typeof t||t instanceof Array?this.jsonObj={}:this.jsonObj=t}return t.prototype.get=function(t,e){return void 0!==this.jsonObj[t]?this.jsonObj[t]:e},t.prototype.set=function(t,e){return this.jsonObj[t]=e,this},t.value=function(t,e,o){return"object"==typeof t?void 0===t[e]?o:t[e]:o},t}();e.a=n},function(t,e,o){"use strict";o.d(e,"a",function(){return n});var n={begin:{type:1,text:"开始"},task:{type:2,text:"任务"},cond:{type:3,text:"判断"},audit:{type:4,text:"审核"},sign:{type:5,text:"会签"},parallel:{type:6,text:"并行"},merge:{type:7,text:"合并"},subFlow:{type:8,text:"子流程"},end:{type:9,text:"结束"}}}])});