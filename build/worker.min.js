!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"clone",value:function(t){t="object"==(void 0===t?"undefined":o(t))?t:{};return $.extend(!0,{},t)}},{key:"ArrayMergeSameValue",value:function(t){if("object"==(void 0===t?"undefined":o(t))&&t.length&&t.length>1){for(var e={},n=[],r=0;r<t.length;r++)e[t[r]]||(n.push(t[r]),e[t[r]]=!0);t=n}return t}},{key:"each",value:function(t,e){if("object"==(void 0===t?"undefined":o(t)))if($.isArray(t))for(var n=0;n<t.length&&!1!==e(n,t[n]);n++);else for(var r in t)if(!1===e(r,t[r]))break}}]),t}();e.Util=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fromLine=[],this.toLine=[]}return o(t,[{key:"recordLine",value:function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)}},{key:"syncLineMove",value:function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,n=this.toLine,o=0;o<e.length;o++){var r=e[o].c;r.attr("path");t(r,"from",e[o])}for(var i=0;i<n.length;i++){t(n[i].c,"to",n[i])}}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(3),a=n(0),c=function(t){return t&&t.__esModule?t:{default:t}}(n(9)),u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$index=c.default.getIndex(),this.config=a.Util.clone(e),this.$raphael=c.default.createInstance(this.config),this.$flow=new i.Flow(this.$raphael),this.setOption(n),this.leastLineQue=[],this.draw()}return r(t,[{key:"cNodeMap",value:function(t,e){var n=c.default.src(this.$index,"CodeNodeMaps");return n||(n={}),t?e?(n[t]=e,c.default.src(this.$index,"CodeNodeMaps",n),this):n[t]||!1:n}},{key:"draw2",value:function(){var t=this;if(this.option){var e=this.option.step;this.codeIndex(e);for(var n=this.config,o=n.x||parseInt(.4*n.w),r=n.y||10,i=n.cH||50,c=n.dH||30,u={},f=function(e){var n=t.codeIndex(e),o=null;return n&&n.length>0&&a.Util.each(n,function(t,e){if(u[e])return o=u[e].y,!1}),o},l=function(e){var n=t.codeIndex(e),o=n.length,r=0;return a.Util.each(n,function(t,e){u[e]&&(r+=1)}),o-r},s=0;s<e.length;s++){var p=e[s],y=p.code,h=p.name||y,v=this.cNodeMap(y),d=!1;if(v&&(d=!0),!d)if(1==p.type)r+=c+i/2,(v=this.$flow.endpoint(o,r,i/2,h)).c.attr("fill","rgb(181, 216, 126)"),v.$step=p,this.drag(v),r+=i/2;else if(2==p.type){var g=100,b=this.codeIndex(y),x=o;if(p.prev&&-1==p.prev.indexOf(",")){var m=this.getNodeByCode(p.prev);m&&m.c&&(x=this.getStandX(m))}if(b&&b.length>1){var w=l(y),k=Math.ceil(b.length/2),P=x+(25+g)*(k-w),M=f(y);M?P=x+(25+g)*(k-w):r+=c+i/2,M=M||r,v=this.$flow.operation(P,M,g,i,h),u[y]={y:r}}else r+=c+i/2,v=this.$flow.operation(x,r,g,i,h);v.$step=p,this.drag(v),v.c.attr("fill","rgb(224, 223, 226)"),r+=i/2}else 3==p.type?(r+=c+i/2,(v=this.$flow.judge(o,r,g+60,i,h)).c.attr("fill","rgb(49, 174, 196)"),v.$step=p,this.drag(v),r+=i/2):9==p.type&&(r+=c+i/2,(v=this.$flow.endpoint(o,r,i/2,h)).c.attr("fill","rgb(34, 185, 41)"),v.$step=p,this.drag(v));v&&(d?this.line(v,p):(this.cNodeMap(y,v),this.line(v),this._eventBind(v)))}}}},{key:"checkPaperHight",value:function(t){var e=this.config.dom.find("svg"),n=e.height();n<t+50&&e.css({height:n+150})}},{key:"draw",value:function(){var t=this;this.getNodeCls();var e=c.default.src(this.$index,"_nodeCls"),n=a.Util.clone(this.option),o=.21,r=this.conf("cH",50),i=this.conf("dH",30),u=this.conf("h"),f=e.clsValue,l=this.conf("sColumnMk",!0);o=l?.43:r*(f-1)+i*f<u?.43:o;var s=this.conf("x",parseInt(this.conf("w")*o)),p=s,y=this.conf("y",10),h=y,v=this.conf("bkgOperCol","rgb(224, 223, 226)"),d=this.conf("bkgJudgeCol","rgb(49, 174, 196)");this.conf("currentCode",!1);e.isMuti=function(t){var n=e.map[t];return e.mapDt[n].length>1},e.getMutiY=function(n,o){var r=0;o=o||0;var i=e.map[n],c=e.mapDt[i];return c.length>1&&a.Util.each(c,function(e,n){var o=t.getNodeByCode(n);if(o)return r=t.getStandY(o),!1}),r=r||o},e.getMutiCtt=function(n){var o=e.map[n],r=e.mapDt[o],i=r.length,c=0;return i>1&&a.Util.each(r,function(e,n){t.getNodeByCode(n)&&(c+=1)}),{len:i,hasEd:c}},a.Util.each(n.step,function(n,o){var a,c,f=o.type,g=o.code,b=o.name||g;switch(l?t.checkPaperHight(h):h+2*r>u&&(h=y,p+=s),f){case 1:h+=i,(a=t.$flow.endpoint(p,h,r/2,b)).c.attr("fill",t.conf("pkgStartCol","rgb(181, 216, 126)"));break;case 2:if(c=p,e.isMuti(g)){var x=e.getMutiY(g,null),m=e.getMutiCtt(g);if(2==m.len)m.hasEd>0&&(c+=50+1.5*r);else if(m.len>2){var w=Math.ceil(m.len/2);c+=(25+2*r)*(w-(m.len-m.hasEd))}x?h=x:h+=e.getMutiY(g,2*i+r/2)}else h+=2*i+r/2;(a=t.$flow.operation(c,h,100,r,b)).c.attr("fill",v);break;case 3:h+=2*i+r/2,(a=t.$flow.judge(p,h,100,r,b)).c.attr("fill",d);break;case 9:h+=2*i+r/2,(a=t.$flow.endpoint(p,h,r/2,b)).c.attr("fill",t.conf("bkgEndCol","rgb(34, 185, 41)"))}a&&(a.$step=o,a.c.data("_code",g),t.cNodeMap(g,a),t.line(a),t._eventBind(a),t.drag(a))}),this.connectLeastLines()}},{key:"getNodeCls",value:function(){var t=a.Util.clone(this.option),e=0,n={},o={};a.Util.each(t.step,function(t,r){var i=r.prev,a=r.code;i&&n[i]&&(e=n[i]),e+=1,n[a]=e,o[e]?o[e].push(a):o[e]=[a]}),c.default.src(this.$index,"_nodeCls",{map:n,mapDt:o,clsValue:e})}},{key:"drag",value:function(t){!function(t,e){var n={};t.c.drag(function(o,r){o+=n.x,r+=n.y,t.move(o,r),e.line&&"arrow"==e.line?t.ToSyncArrow(o,r):t.ToSyncLine(o,r)},function(){var t,e;if("circle"==this.type)t=this.attr("cx"),e=this.attr("cy");else if("rect"==this.type)t=this.attr("x"),e=this.attr("y");else if("path"==this.type){var o=this.attr("path")[0];t=o[1],e=o[2]}n.x=t,n.y=e},function(){})}(t,this.config)}},{key:"line",value:function(t,e){var n=this,o=a.Util.clone(t.$step);if(o.prev&&(o.prev=o.prev.replace(/\s/g,"")),o.prev){var r,i=this.config,c=void 0===i.rightAngle||i.rightAngle,u=function(t,e){var o,r=n.getNodeByCode(t),a=n.getNodeByCode(e);if(r&&a){if(i.line&&"arrow"==i.line){var u=r.getStlnP(),f=a.getEnlnP();(o=n.$flow.arrow([u.x,u.y],[f.x,f.y],i.arrowLen?i.arrowLen:4)).position={from:u.position,to:f.position},o.c.attr("fill","rgb(14, 10, 10)")}else{u=r.getStlnP(),f=a.getEnlnP();(o=c?n.$flow.rightAngleLine({p1:{x:u.x,y:u.y},p2:{x:f.x,y:f.y}}):n.$flow.line([u.x,u.y],[f.x,f.y])).position={from:u.position,to:f.position}}r.recordLine("from",o),a.recordLine("to",o);var l=n.nodeRunedMk(e);if(l&&o){var s=n.conf("bkgRunedCol","rgb(255, 0, 0)");o.c.attr({fill:s,stroke:s}),a.c.attr({stroke:s}),2==l&&r.c.attr({stroke:s})}}else n.leastLineQue.push({from:t,to:e})};r=(e=e||o).prev.indexOf(",")>-1?e.prev.split(","):[e.prev];for(var f=0;f<r.length;f++)u(r[f],e.code)}}},{key:"connectLeastLines",value:function(){var t=this,e=this.config,n=void 0===e.rightAngle||e.rightAngle;a.Util.each(this.leastLineQue,function(o,r){!function(o,r){var i,a=t.getNodeByCode(o),c=t.getNodeByCode(r);if(a&&c){if(e.line&&"arrow"==e.line){var u=a.getStlnP(),f=c.getEnlnP();(i=t.$flow.arrow([u.x,u.y],[f.x,f.y],e.arrowLen?e.arrowLen:4)).position={from:u.position,to:f.position},i.c.attr("fill","rgb(14, 10, 10)")}else u=a.getStlnP(),f=c.getEnlnP(),(i=n?t.$flow.rightAngleLine({p1:{x:u.x,y:u.y},p2:{x:f.x,y:f.y}}):t.$flow.line([u.x,u.y],[f.x,f.y])).position={from:u.position,to:f.position};a.recordLine("from",i),c.recordLine("to",i);var l=t.nodeRunedMk(r);if(l&&i){var s=t.conf("bkgRunedCol","rgb(255, 0, 0)");i.c.attr({fill:s,stroke:s}),c.c.attr({stroke:s}),2==l&&a.c.attr({stroke:s})}}}(r.from,r.to)})}},{key:"setOption",value:function(t){"object"==(void 0===t?"undefined":o(t))&&(this.option=a.Util.clone(t))}},{key:"getNodeByCode",value:function(t){var e=null,n=this.cNodeMap(t);return n&&(e=n),e}},{key:"codeIndex",value:function(t){if("object"==(void 0===t?"undefined":o(t))){for(var e={},n=0;n<t.length;n++){var r=t[n],i=r.code;if(r.prev)for(var u=r.prev.replace(/\s/g,"").split(","),f=0;f<u.length;f++){var l=u[f],s=e[l]?e[l]:0;if("object"==(void 0===s?"undefined":o(s))&&s.length&&(s=1==s.length?s[0]:s),s+=1,e[i]){if("object"!=o(e[i])){var p=e[i];e[i]=[p]}e[i].push(s),e[i]=a.Util.ArrayMergeSameValue(e[i])}else e[i]=s}else e[i]=1}c.default.src(this.$index,"clsMap",e)}else if(t){if(e=c.default.src(this.$index,"clsMap")){var y=e[t]||null,h=[t];for(var v in e)y==e[v]&&-1==$.inArray(v,h)&&h.push(v);return h}}}},{key:"getStandX",value:function(t){var e=null;if(t&&t.c){var n=t.c;switch(n.type){case"circle":e=n.attr("cx");break;case"rect":e=n.attr("x")+n.attr("width")/2;break;case"path":e=t.opt.cx}}return e}},{key:"getStandY",value:function(t){var e=null;if(t&&t.c){var n=t.c;switch(n.type){case"circle":e=n.attr("cy");break;case"rect":e=n.attr("y")+n.attr("height")/2;break;case"path":e=t.opt.cy}}return e}},{key:"removeBBox",value:function(){var t=this.cNodeMap();for(var e in t){var n=t[e];n.bBox&&n.bBox.remove()}}},{key:"_eventBind",value:function(t){var e=this;t.c.click(function(){e.removeBBox(),t.bBox&&t.bBox.remove();var n=this.getBBox();t.bBox=t.instance.rect(n.x-5,n.y-5,n.width+10,n.height+10),t.bBox.attr({stroke:e.conf("bkgNodeBox","rgb(15, 13, 105)")})})}},{key:"conf",value:function(t,e){return e=e||null,void 0!==this.config[t]&&(e=this.config[t]),e}},{key:"nodeRunedMk",value:function(t){var e=this.conf("currentCode",!1);if(e){var n=c.default.src(this.$index,"_nodeCls"),o=n.map[e],r=n.map[t];e=r<=o&&r}return e}}]),t}();e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.NodeJudge=e.NodeOperation=e.NodeEndpoint=e.NodeArrow=e.NodeLine=e.Flow=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=(n(0),o(n(4))),a=o(n(5)),c=o(n(6)),u=o(n(7)),f=o(n(8)),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.paper=e}return r(t,[{key:"endpoint",value:function(t,e,n,o){var r=new i.default(this.paper);return r.create(t,e,n,o),r}},{key:"judge",value:function(t,e,n,o,r){var i=new c.default(this.paper);return i.create(t,e,n,o,r),i}},{key:"operation",value:function(t,e,n,o,r){var i=new a.default(this.paper);return i.create(t,e,n,o,r),i}},{key:"line",value:function(t,e){var n=new u.default(this.paper);return n.create(t,e),n}},{key:"rightAngleLine",value:function(t){var e=new u.default(this.paper);return e.RightAngle(t),e}},{key:"arrow",value:function(t,e,n){var o=new f.default(this.paper);return o.create(t,e,n),o}},{key:"getEmptyNode",value:function(t){var e=null;switch(t){case"endpoint":e=new i.default(this.paper);break;case"judge":e=new c.default(this.paper);break;case"operation":e=new a.default(this.paper);break;case"line":e=new u.default(this.paper);break;case"arrow":e=new f.default(this.paper)}return e}}]),t}();e.Flow=l,e.NodeLine=u.default,e.NodeArrow=f.default,e.NodeEndpoint=i.default,e.NodeOperation=a.default,e.NodeJudge=c.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=(n(0),function(t){return t&&t.__esModule?t:{default:t}}(n(1))),a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.instance=t,n.opt={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"create",value:function(t){if("object"!=(void 0===t?"undefined":o(t))){var e=arguments;t={cx:e[0],cy:e[1],r:e[2]},e[3]&&(t.text=e[3])}this.opt=t,this.c=this.instance.circle(t.cx,t.cy,t.r);var n;n=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=n}},{key:"move",value:function(t,e){this.c.attr({cx:t,cy:e}),this.label.attr({x:t,y:e})}},{key:"ToSyncLine",value:function(t,e){var n=this;this.syncLineMove(function(o,r,i){var a,c=i.position;if("from"==r){var u=o.attr("path");a="get"+c.from+"p";var f=n[a](t,e);u[0]=["M",f.x,f.y],o.attr("path",u)}else if("to"==r){var l=o.attr("path");a="get"+c.to+"p";var s=n[a](t,e);l[l.length-1]=["L",s.x,s.y],o.attr("path",l)}})}},{key:"ToSyncArrow",value:function(t,e){var n=this;this.syncLineMove(function(o,r,i){var a,c=i.position;if("from"==r){a="get"+c.from+"p";var u=n[a](t,e);i.updatePath([u.x,u.y])}else if("to"==r){a="get"+c.to+"p";var f=n[a](t,e);i.updatePath(null,[f.x,f.y])}})}},{key:"getStlnP",value:function(){var t=this.getDp();return t.position="D",t}},{key:"getEnlnP",value:function(){var t=this.getBp();return t.position="B",t}},{key:"getAp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t-=n.r,{x:t,y:e}}},{key:"getBp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,e-=n.r,{x:t,y:e}}},{key:"getCp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t+=n.r,{x:t,y:e}}},{key:"getDp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,e+=n.r,{x:t,y:e}}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.instance=t,n.opt={},n.bBox=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"create",value:function(t){if("object"!=(void 0===t?"undefined":o(t))){var e=arguments;t={cx:e[0],cy:e[1],w:e[2],h:e[3]},e[4]&&(t.text=e[4])}this.opt=t;var n=this.getAp();this.c=this.instance.rect(n.x,n.y,t.w,t.h);var r;r=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=r}},{key:"move",value:function(t,e){var n=this.getCtpByAp(t,e);this.c.attr({x:t,y:e}),this.label.attr(n)}},{key:"ToSyncLine",value:function(t,e){var n=this,o=this.getCtpByAp(t,e);this.syncLineMove(function(t,e,r){var i,a=r.position;if("from"==e){var c=t.attr("path");i="get"+a.from+"p";var u=n[i](o.x,o.y);c[0]=["M",u.x,u.y],t.attr("path",c)}else if("to"==e){i="get"+a.to+"p";var f=n[i](o.x,o.y),l=t.attr("path");l[l.length-1]=["L",f.x,f.y],t.attr("path",l)}})}},{key:"ToSyncArrow",value:function(t,e){var n=this,o=this.getCtpByAp(t,e);this.syncLineMove(function(t,e,r){var i,a=r.position;if("from"==e){i="get"+a.from+"p";var c=n[i](o.x,o.y);r.updatePath([c.x,c.y])}else if("to"==e){i="get"+a.to+"p";var u=n[i](o.x,o.y);r.updatePath(null,[u.x,u.y])}})}},{key:"getStlnP",value:function(){var t=this.getBtp();return t.position="Bt",t}},{key:"getEnlnP",value:function(){var t=this.getTp();return t.position="T",t}},{key:"getCtpByAp",value:function(t,e){var n=this.opt;return t+=n.w/2,e+=n.h/2,{x:t,y:e}}},{key:"getAp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t-=n.w/2,e-=n.h/2,{x:t,y:e}}},{key:"getBp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t-=n.w/2,e+=n.h/2,{x:t,y:e}}},{key:"getCp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t+=n.w/2,e+=n.h/2,{x:t,y:e}}},{key:"getDp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t-=n.w/2,e+=n.h/2,{x:t,y:e}}},{key:"getTp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,e-=n.h/2,{x:t,y:e}}},{key:"getRp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t+=n.w/2,{x:t,y:e}}},{key:"getBtp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,e+=n.h/2,{x:t,y:e}}},{key:"getLp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t-=n.w/2,e+=n.h/2,{x:t,y:e}}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.instance=t,n.opt={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"create",value:function(t){if("object"!=(void 0===t?"undefined":o(t))){var e=arguments;t={cx:e[0],cy:e[1],w:e[2],h:e[3]},e[4]&&(t.text=e[4])}this.opt=t;var n=this.getAp(),r=this.getBp(),i=this.getCp(),a=this.getDp();this.c=this.instance.path("M"+n.x+","+n.y+"L"+r.x+","+r.y+"L"+i.x+","+i.y+"L"+a.x+","+a.y+"Z");var c;c=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=c}},{key:"move",value:function(t,e){var n=this.getCpByAp(t,e),o=this.getBp(n.x,n.y),r=this.getCp(n.x,n.y),i=this.getDp(n.x,n.y);this.c.attr("path",[["M",t,e],["L",o.x,o.y],["L",r.x,r.y],["L",i.x,i.y],["Z"]]),this.label.attr(n)}},{key:"ToSyncLine",value:function(t,e){var n=this,o=this.getCpByAp(t,e);this.syncLineMove(function(t,e,r){var i,a=r.position;if("from"==e){i="get"+a.from+"p";var c=n[i](o.x,o.y),u=t.attr("path");u[0]=["M",c.x,c.y],t.attr("path",u)}else if("to"==e){i="get"+a.to+"p";var f=n[i](o.x,o.y),l=t.attr("path");l[l.length-1]=["L",f.x,f.y],t.attr("path",l)}})}},{key:"ToSyncArrow",value:function(t,e){var n=this,o=this.getCpByAp(t,e);this.syncLineMove(function(t,e,r){var i,a=r.position;if("from"==e){i="get"+a.from+"p";var c=n[i](o.x,o.y);r.updatePath([c.x,c.y])}else if("to"==e){i="get"+a.to+"p";var u=n[i](o.x,o.y);r.updatePath(null,[u.x,u.y])}})}},{key:"getStlnP",value:function(){var t=this.getDp(),e="D";this.isCoincidence(t,"from")&&(t=this.getCp(),e="C");return{x:t.x,y:t.y,position:e}}},{key:"getEnlnP",value:function(){var t=this.getBp();return t.position="B",t}},{key:"getCpByAp",value:function(t,e){return t+=this.opt.w/2,{x:t,y:e}}},{key:"getAp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t-=n.w/2,{x:t,y:e}}},{key:"getBp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,e-=n.h/2,{x:t,y:e}}},{key:"getCp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,t+=n.w/2,{x:t,y:e}}},{key:"getDp",value:function(t,e){var n=this.opt;return t=t||n.cx,e=e||n.cy,e+=n.h/2,{x:t,y:e}}},{key:"isCoincidence",value:function(t,e){var n=!1;if(t&&"object"==(void 0===t?"undefined":o(t))&&void 0!==t.x&&void 0!==t.y)if("from"==e){if(this.fromLine.length>0)for(var r=0;r<this.fromLine.length;r++){if((c=(a=this.fromLine[r].c.attr("path"))[0])[1]==t.x&&c[2]==t.y){n=!0;break}}}else if("to"==e&&this.toLine.length>0)for(var i=0;i<this.toLine.length;i++){var a,c;if((c=(a=this.toLine[i].c.attr("path"))[a.length-1])[1]==t.x&&c[2]==t.y){n=!0;break}}return n}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(0),i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instance=e,this.opt={},this.position={},this.rightAngle=!1}return o(t,[{key:"create",value:function(t,e){this.opt={p1:t,p2:e},this.c=this.instance.path("M"+t[0]+","+t[1]+"L"+e[0]+","+e[1])}},{key:"RightAngle",value:function(t){this.opt=t,this.rightAngle=!0;var e=t.p1,n=t.p2,o=20;t.d&&(o=t.d);var r="";if(e.x!=n.x&&e.y!=n.y){var i=n.x-e.x;r="L"+(e.x+i+o*(i>0?1:-1))+","+e.y+"L"+(e.x+i+o*(i>0?1:-1))+","+n.y}this.c=this.instance.path("M"+e.x+","+e.y+r+"L"+n.x+","+n.y)}},{key:"createByPoint",value:function(t){this.opt=t;var e="";r.Util.each(this.opt.points,function(t,n){n&&(e+=(e?"L":"M")+n.x+","+n.y)}),this.c=this.instance.path(e)}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instance=e,this.opt={},this.position={}}return o(t,[{key:"create",value:function(t,e,n){this.opt={p1:t,p2:e,r:n};var o=this.getPoints();this.c=this.instance.path("M"+t[0]+","+t[1]+"L"+e[0]+","+e[1]+"L"+o.cP.x+","+o.cP.y+"L"+o.dP.x+","+o.dP.y+"L"+e[0]+","+e[1])}},{key:"getPoints",value:function(t,e,n){var o=this.opt;t||(t=o.p1),e||(e=o.p2),n||(n=o.r);var r=Math.atan2(t[1]-e[1],e[0]-t[0])*(180/Math.PI),i=e[0]-n*Math.cos(r*(Math.PI/180)),a=e[1]+n*Math.sin(r*(Math.PI/180));return{cP:{x:i+n*Math.cos((r+120)*(Math.PI/180)),y:a-n*Math.sin((r+120)*(Math.PI/180))},dP:{x:i+n*Math.cos((r+240)*(Math.PI/180)),y:a-n*Math.sin((r+240)*(Math.PI/180))}}}},{key:"updatePath",value:function(t,e,n){var o=this.opt;t||(t=o.p1),e||(e=o.p2),n||(n=o.r);var r=this.getPoints(t,e,n);this.c.attr("path",[["M",t[0],t[1]],["L",e[0],e[1]],["L",r.cP.x,r.cP.y],["L",r.dP.x,r.dP.y],["L",e[0],e[1]]]),this.opt={p1:t,p2:e,r:n}}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=0,a={},c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"createInstance",value:function(t){return(t="object"==(void 0===t?"undefined":o(t))?t:{}).dom,"string"==typeof t.dom&&(t.dom=$(t.dom)),t.w||(t.w=parseInt(1.1*$(window).width())),t.h||(t.h=parseInt(1.1*$(window).height())),Raphael(t.dom.get(0),t.w,t.h)}},{key:"onMoveEvt",value:function(){}},{key:"onStartEvt",value:function(){}},{key:"onEndEvt",value:function(){}},{key:"getIndex",value:function(){return i+=1}},{key:"src",value:function(t,e,n){a[t]||(a[t]={});var o=a[t];return void 0===e?o:void 0===n?o[e]||null:void(o[e]=n)}}]),t}();e.default=c}]);